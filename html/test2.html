<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mon Site Dynamique</title>
    <style>
        /* 1. RESET DE BASE */
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            overflow: hidden;
            background-color: #111; /* Couleur de fond quand on travaille */
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: white;
        }

        /* 2. LE CONTENU (TEXTE, BOUTONS, ETC.) */
        #ui-content {
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            transition: all 0.8s ease;
        }

        h1 { font-size: 3.5rem; margin-bottom: 0; }
        p { font-size: 1.2rem; opacity: 0.8; }

        /* 3. LA VIDÉO (CACHÉE PAR DÉFAUT) */
        #bg-video {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: 1;
            opacity: 0; /* Invisible au début */
            pointer-events: none;
            transition: opacity 1.5s ease;
        }

        /* 4. TON ANIMATION fadeInScale */
        @keyframes fadeInScale {
            from { 
                opacity: 0; 
                transform: scale(0.95); 
            }
            to { 
                opacity: 1; 
                transform: scale(1); 
            }
        }

        /* 5. ÉTAT INACTIF (QUAND ON NE BOUGE PLUS) */
        /* La vidéo apparaît avec ton animation */
        body.is-idle #bg-video {
            opacity: 1;
            animation: fadeInScale 1.2s ease-out forwards;
        }

        /* Le texte devient discret quand la vidéo s'active */
        body.is-idle #ui-content {
            opacity: 0.3;
            transform: scale(0.9);
            filter: blur(2px);
        }

        /* Indicateur d'état en bas de page */
        .status {
            position: fixed;
            bottom: 20px;
            left: 20px;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            opacity: 0.5;
            z-index: 3;
        }
    </style>
</head>
<body>

    <video autoplay muted loop playsinline id="bg-video">
        <source src="../videos/efrei.mp4" type="video/mp4">
        Votre navigateur ne supporte pas la vidéo.
    </video>

    <div id="ui-content">
        <h1>MODE TRAVAIL</h1>
        <p>Arrête de bouger la souris pendant 3 secondes...</p>
    </div>

    <div class="status" id="status-text">Actif</div>

    <script>
        const body = document.body;
        const statusText = document.getElementById('status-text');
        let idleTimer;
        
        // Temps d'inactivité avant d'afficher la vidéo (en millisecondes)
        const IDLE_TIME = 3000; 

        function setIdle() {
            body.classList.add('is-idle');
            statusText.innerText = "En veille (Vidéo active)";
        }

        function setActive() {
            // On retire la classe d'inactivité
            body.classList.remove('is-idle');
            statusText.innerText = "Actif";

            // On réinitialise le compte à rebours
            clearTimeout(idleTimer);
            idleTimer = setTimeout(setIdle, IDLE_TIME);
        }

        // Événements qui indiquent que l'utilisateur est présent
        window.onmousemove = setActive; // Mouvement souris
        window.onkeydown = setActive;   // Touche clavier
        window.onclick = setActive;     // Clic
        window.ontouchstart = setActive; // Tactile (mobile)

        // Initialisation au chargement
        setActive();
    </script>
</body>
</html>