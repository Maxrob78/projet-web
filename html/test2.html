<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Site Immersif - Test Scroll</title>
    <style>
        /* 1. RESET & FOND */
        body, html {
            margin: 0;
            padding: 0;
            background-color: #0a0a0a;
            font-family: 'Segoe UI', Roboto, sans-serif;
            color: white;
            scroll-behavior: smooth;
        }

        /* 2. LA VID√âO (Position FIXE pour qu'elle nous suive) */
        #bg-video {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain;
            background-color: #000;
            z-index: 1;
            opacity: 0;
            transition: opacity 1s ease;
            pointer-events: none;
        }

        /* 3. LE CONTENU DU SITE */
        .content {
            position: relative;
            z-index: 5;
            max-width: 800px;
            margin: 0 auto;
            padding: 100px 20px;
            line-height: 1.6;
            transition: filter 1s ease, opacity 1s ease, transform 1s ease;
        }

        section {
            margin-bottom: 100px;
            padding: 40px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
        }

        h1 { font-size: 3rem; color: #00d4ff; }
        h2 { font-size: 2rem; color: #00d4ff; }
        p { font-size: 1.1rem; color: #ccc; }

        /* 4. TON ANIMATION fadeInScale */
        @keyframes fadeInScale {
            from { opacity: 0; transform: translate(-50%, -50%) scale(0.9); }
            to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }

        /* 5. MESSAGE D'INACTIVIT√â */
        #idle-message {
            position: fixed;
            top: 80%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
            display: none;
            text-align: center;
            pointer-events: none;
            background: rgba(0, 0, 0, 0.6);
            padding: 30px;
            border-radius: 20px;
            backdrop-filter: blur(5px);
        }

        /* 6. √âTATS QUAND INACTIF */
        body.is-idle .content {
            filter: blur(25px);
            opacity: 0;
            transform: scale(0.98);
        }

        body.is-idle #bg-video {
            opacity: 1;
        }

        body.is-idle #idle-message {
            display: block;
            animation: fadeInScale 0.8s ease-out forwards;
        }
    </style>
</head>
<body>

    <video muted loop playsinline id="bg-video">
        <source src="../videos/test2.mp4" type="video/mp4">
    </video>

    <div id="idle-message">
        <h2 style="margin:0; color:white;">MODE VEILLE</h2>
        <p style="margin:10px 0 0 0;">Bouge pour revenir au site</p>
    </div>

    <div class="content">
        <section>
            <h1>Bienvenue</h1>
            <p>Ceci est le haut de ta page. Scrolle vers le bas pour voir l'effet de la vid√©o qui reste fixe.</p>
        </section>

        <section>
            <h2>Pourquoi ce design ?</h2>
            <p>En utilisant <strong>position: fixed</strong> sur la vid√©o, elle ne bouge pas quand tu d√©files. Elle attend patiemment en arri√®re-plan que tu t'arr√™tes de bouger.</p>
        </section>

        <section>
            <h2>Un peu de contenu...</h2>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            <div style="height: 200px; background: linear-gradient(45deg, #00d4ff, #0055ff); border-radius: 10px; margin: 20px 0;"></div>
        </section>

        <section>
            <h2>Le test ultime</h2>
            <p>Arr√™te-toi n'importe o√π sur cette section. Apr√®s 3 secondes, tout ce texte va devenir flou et dispara√Ætre au profit de ta vid√©o verticale centr√©e.</p>
        </section>

        <section>
            <h2>Pied de page</h2>
            <p>Tu es arriv√© en bas ! M√™me ici, le script fonctionne. Si tu restes immobile, la vid√©o se lancera du d√©but avec un son l√©ger (si tu as cliqu√© avant).</p>
        </section>
    </div>

    <script>
        const titreOriginal = document.title;
        const video = document.getElementById('bg-video');
        let idleTimer;
        const IDLE_TIME = 5000; // 5 secondes

        function setIdle() {
            document.body.classList.add('is-idle');
            document.title = "Zzz... Tu dors ? üåô";
            
            // Relance la vid√©o du d√©but
            video.currentTime = 0;
            video.volume = 1;
            video.muted = false;

            let playPromise = video.play();
            if (playPromise !== undefined) { 
                playPromise.catch(() => { // Si la lecture est bloqu√©e (ex: pas de clic pr√©alable), on mute et on joue quand m√™me
                    video.muted = true;
                    video.play();
                });
            }
        }

        function setActive() {
            document.body.classList.remove('is-idle');
            document.title = titreOriginal;
            video.muted = true;
            video.pause(); 

            clearTimeout(idleTimer);
            idleTimer = setTimeout(setIdle, IDLE_TIME);
        }

        // On √©coute tout, y compris le scroll
        ['mousemove', 'keydown', 'scroll', 'click', 'touchstart'].forEach(event => {
            window.addEventListener(event, setActive);
        });

        // Premier lancement
        setActive();
    </script>
</body>
</html>